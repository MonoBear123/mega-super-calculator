Полурабочий калькулятор
==============



***Содержание:***
- [Описание](#Introduction)
- [Работа сервиса](#Preparing)
- [Как собрать проект](#assembly)
- [Тесты](#Test)



# Описание <a name="Introduction"></a>

**Суть** — Пользователь вводит выражение на выход получает ответ через какой-то промежуток времени.Во время выполнения может следить за статусом воркеров и сам задавать время выполнения оперий. 
Виды операций: +-/*^ 
# Работа сервиса<a name="Preparing"></a>
## Устройство : 
  Redis использьзуется как база данных 
  

![struct](art/graph.jpg "Структура")
Оркестратор получает выражение,после парсит его и начинает раскладывать на под выражения  и отправляет их  в очередь
![queue](art/qu.jpg "очередь")

Количество агентов регулируется в docker-compose.yaml, также как и возможность их рестартов

# Как собрать проект <a name="assembly"></a>

## Требования:
#### Windows
- Docker Desktop
#### Linux
- Docker Engine
- Доступ к sudo/пользователь в группе docker
## Запуск

```bash
docker compose up
```

# Заходим на  localhost:8041
 Если html не работает, то отправляем запрос curl -X POST -H "Content-Type: application/json" -d "{\"expression\": \"2 + 2\"}" http://localhost:8041/set для отправки выражения 
 
 Для получения статуса агентов curl localhost:8041/getstatus
# Тесты <a name="Test"></a> 
- тесты находятся в папке tests\postg\auth_test.go там есть тест как на регистацию,логин и подсчет выражения.
- !ВАЖНО для запуска тестов нужно установить тайм аут для выполнения горутин 600с.
 
Телеграмм для связи MONOBEARW

